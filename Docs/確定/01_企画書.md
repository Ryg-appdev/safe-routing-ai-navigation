# 01_企画書.md

## 1. 企画概要 (Overview)

- **プロダクト名:** Situation-Adaptive Safe Routing AI Navigation
- **コンセプト:** 「いつもの移動は"安心寄り"に、非常時は"生存寄り"に切り替わるナビ」
- **コアバリュー:**
    - 既存ナビの「最短・最速」ではなく、「リスク回避」を最適化する。
    - ブラックボックスな指示ではなく、**Gemini 3** が「なぜその道を避けたか」を思考・説明する。

## 2. ハッカソン戦略 (Strategy)

**Target:** Google Cloud Japan AI Hackathon Vol.4

- **狙うテーマ:** Agentic AI（自律的に考え行動するAI）
- **必須要件:**
    - **AI:** **Gemini 3** を活用し、高度な推論（Thinking Process）を取り入れる。
    - **Cloud:** Google Cloud (Firebase Genkit / Cloud Functions) をバックエンドに採用する。
- **提出戦略:**
    - **形態:** iOSネイティブアプリ (SwiftUI)
    - **デプロイURL:** Backend API (Cloud Functions) のURL を提出。アプリ動作は**デモ動画 (YouTube)** で証明する。

## 3. システムアーキテクチャ (Architecture)

**構成:** Client-Server-Agent の3層モデル

### Frontend (iOS)

- **Tech:** Swift, SwiftUI, **Google Maps SDK for iOS**
- **役割:**
    - UI/UXの提供（日常モード/非常時モードの劇的な変化）。
    - 位置情報とユーザーの移動モードをバックエンドへ送信。
    - AIからの回答（ルート座標 + 説明テキスト + 思考ログ）を描画。

### Backend (Agentic AI Layer)

- **Tech:** Firebase Genkit (Node.js/TypeScript)
- **役割:** マルチエージェントオーケストレーション
    1. **Input Agent:** クライアントからの要求と、外部データ（天気・災害・治安）を統合。
    2. **Risk Evaluator (Gemini 3):** 思考プロセスに基づくリスク判断。
    3. **Route Selector:** リスク評価に基づき、最適な経路を選定。全ルート危険時は自律リトライ。
    4. **Narrator Agent:** ユーザーへの「納得感のある説明」を生成。

## 4. MVP機能スコープ (Scope for Hackathon)

**「狭く、深く、派手に」** 実装する。

- **対象エリア:** 渋谷区に限定。データもこのエリア分のみ用意。
- **機能:**
    - **モード切替:** 「日常（青）」⇔「非常時（赤）」のトグルスイッチ。
    - **AI説明:** モード変更時、即座にGemini 3が状況を判断し、テキストで理由を語る。
    - **地図描画:** 危険エリアを避けたルートを視覚的に表示。
    - **思考ログ表示:** AIのバックグラウンド処理を可視化。
- **データ:** リアルタイムAPIを活用しつつ、デモの安定性のため一部Mock（事故情報）を使用する。

## 5. 開発ロードマップ (Next Actions)

1. **環境構築 (Backend):** Firebase Genkit 初期化、Gemini 3 APIキー取得・疎通確認。
2. **環境構築 (Frontend):** Xcodeプロジェクト作成、Google Maps SDK導入、モード切替UIの基本実装。
3. **疎通確認:** iOSからBackendのエンドポイントを叩き、Geminiの返答がアプリに表示されるかテスト。
4. **作り込み:** プロンプト調整、UIアニメーション、デモ動画撮影。
